# [Чат-бот](http://51.250.107.110:8080/) для сервиса "Мобильные сотрудники" от МТС
![image](https://github.com/Psyhoved/MTS_chatbot/assets/83509449/190b6098-a666-46b5-a4f9-3663ce81aff1)
### Установка
- Распаковать архив index.json-20230814T192851Z-001.zip, в нём контекст для тюна модели. 
- Установить зависимости из requirements.txt
- Экспортировать ключ к API Open AI в переменную окружения OPENAI_API_KEY
- Запустить сервер uvicorn командой `uvicorn entrypoints.http_server:app --host 0.0.0.0 --port 8000`

#### Запуск лендинга (опционально)

- Установить java 17
- Собрать приложение из папки `backend` командой `gradle build`
- Артефакт будет находиться по пути `backend/build/libs/neurochat-0.0.1-SNAPSHOT.jar`
- Запустить приложение командой `java -jar neurochat-0.0.1-SNAPSHOT.jar`

### О модели
Чат-бот работает на основе API Open AI GPT-3.5 Turbo и векторизированного контекста (см. дообучение на данных контекста в [ноутбуке](https://github.com/Psyhoved/MTS_chatbot/blob/main/AI_chat_bot_for_MTS.ipynb)) 
### Выполнен в рамках [AI Generative Product Hackathon](https://ai-hackathon.gigaschool.ru/), проходившего 4-19 августа 2023

**Быстрый доступ** к макету чат-бота по [ссылке](http://51.250.107.110:8080/)
![image](https://github.com/Psyhoved/MTS_chatbot/assets/83509449/719d6c6e-74ff-4441-bd60-6cbc143b8cc6)

### Команда - Hard work players
***Участники команды:***
- [Александр Лебедев](https://t.me/HardWorkPlayer_2_0)
- [Нилов Иван](https://t.me/vane_n)
- [Быков Антон](https://t.me/totodeep)

### Постановка задачи от МТС
Создать чат-бота, который смог бы консультировать потенциальных клиентов о сервисе "Мобильные сотрудники" от МТС, заменив собой живого оператора. Заказчик хотел бы видеть бота, который бы писал живым языком, обладал аналитическими навыками для персонализации ответов под конкретный запрос пользователя, а также не болтал на темы, не касающиеся сервиса. Подробнее о задаче на [сайте](https://ai-hackathon.gigaschool.ru/cases) хакатона, в кейсе "МТС: персональный ассистент для малых предпринимателей".

### Данные 
Представили МТС предоставили сырые корпуса текста о сервисе, инструкции и скрипты операторов, а также записи телефонных разговоров операторов с клиентами сервиса. Скачать их можно на [сайте](https://ai-hackathon.gigaschool.ru/cases) хакатона, в кейсе "МТС: персональный ассистент для малых предпринимателей".

В ходе работы над кейсом, **данные были значительно переработаны и дистелированы**. Текст структурировался, лишние фрагменты убирались. По этой части в будущем проека предстоит еще большая работа, так как от качеста и объема данных зависит корректность ответов бота. В тоже время, огромный массив сырых данных, по нашим наблюдениям, бота только путает, в следствии чего он не может ответить даже на простые вопросы. 
![image](https://github.com/Psyhoved/MTS_chatbot/assets/83509449/779b9f25-eff2-482f-8745-a9aa804ff02d)

### Решение 
**MVP чат-бота был создан с помощью API chatGPT-3.5-turbo, инструктируемого контекстом данных о сервисе "Мобильных сотрудников".**

[Лендинг](http://51.250.107.110:8080/) с чат-ботом

Попробовать чат-бот в [Google Colab](https://github.com/Psyhoved/MTS_chatbot/blob/main/AI_chat_bot_for_MTS.ipynb)

Краткое описание:
- Сначала, с помощью библиотеки llama-index и функции construct_index(), создается index, содеращий в себе векорное преставление контекста и скрытые prompts. 
- Затем, благодаря функции ask_bot() пользователь посылает запросы в chatGPT, которые состоят из: контекста, скрытых от пользователя инструкций, истории диалога на 2 сообщения назад и, собственно, запроса пользователя. 
- Диалог продолжается, пока пользователь не завершит чат.


В данном репозитории представлена **production версия**, размещенная на виртуальной машине в Yandex Cloud, на которой и работает лендинга с диалоговым окном, скрипт fastAPI и backend на Python. 

### Примеры диалогов

![image](https://github.com/Psyhoved/MTS_chatbot/assets/83509449/db2db0b4-d0a6-470c-941f-b4efc768572d)


**AI-помощник от МТС:** Здравствуйте, чем я могу вам помочь?

**Клиент:** что делаешь?

**AI-помощник от МТС:** Я здесь, чтобы помочь вам с любыми вопросами о сервисе "Мобильные сотрудники", "МТС Координатор" и "МТС Трекер". Расскажите, чем я могу быть полезной?

**Клиент:** помоги мне объяснить боссу, что нам в курьескую службу необходимо подключить мобильных сотрудников!

**AI-помощник от МТС:** Конечно, я могу помочь вам объяснить вашему боссу, почему подключение сервиса "Мобильные сотрудники" в курьерской службе очень полезно! С помощью этого сервиса вы сможете координировать действия сотрудников, отправлять и принимать SMS-сообщения прямо с сайта услуги, а также управлять рабочим днем сотрудников и создавать задачи и формы отчетности. Кроме того, вы сможете определить местоположение сотрудников по GPS/ГЛОНАСС координатам, записывать и просматривать историю их перемещений, а также обмениваться сообщениями в чате. Это поможет повысить эффективность работы вашей курьерской службы и улучшить координацию действий сотрудников.

**Клиент:** а на сколько примерно мы сможем сократить расходы, если подключим ваш сервис? 

**AI-помощник от МТС:** Сервис "Мобильные сотрудники" может помочь вам сократить расходы на 10-20%. Это значительная выгода для вашего бизнеса! Если у вас есть еще вопросы, я с радостью на них отвечу.

**Клиент:** окей, а если у меня ферма с тракторами, коровами, комбайнами. Там как я могу использовать ваш сервис?

**AI-помощник от МТС:** Сервис "Мобильные сотрудники" может быть полезен и для вашей фермы! Вы сможете контролировать местоположение ваших тракторов, комбайнов и другой техники, а также отслеживать перемещение ваших сотрудников. Это поможет вам оптимизировать работу, улучшить планирование и сократить расходы. Если у вас есть еще вопросы, я с радостью на них отвечу.

![image](https://github.com/Psyhoved/MTS_chatbot/assets/83509449/72dfc988-57a3-4c4b-addd-1bf4c142da6d)
